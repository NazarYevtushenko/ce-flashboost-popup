<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>OlyBoost Executive Editor PRO</title>
    <style>
        :root { --primary: #e32d37; --bg: #f4f7f6; --dark: #1e1e1e; --accent: #00ff7f; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Sidebar */
        .sidebar { width: 420px; background: white; padding: 20px; box-shadow: 2px 0 15px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
        .sidebar-content { flex-grow: 1; overflow-y: auto; padding-right: 10px; }
        
        h2 { margin: 0 0 15px 0; font-size: 18px; color: var(--primary); border-bottom: 2px solid #eee; padding-bottom: 8px; }
        
        .smart-box { background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 8px; padding: 12px; margin-bottom: 15px; }
        .import-box { background: #f8f9fa; border: 1px solid #ddd; border-radius: 8px; padding: 12px; margin-top: 20px; }
        
        .group { margin-bottom: 10px; }
        label { display: block; font-size: 10px; font-weight: 700; color: #888; text-transform: uppercase; margin-bottom: 3px; }
        input, select, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 13px; outline: none; }
        input:focus, textarea:focus { border-color: var(--primary); }
        
        /* Workspace */
        .workspace { flex-grow: 1; padding: 30px; display: flex; flex-direction: column; gap: 15px; overflow-y: auto; align-items: center; }
        .preview-box { background: #333; border-radius: 12px; padding: 40px; display: flex; justify-content: center; align-items: center; width: 100%; min-height: 400px; box-shadow: inset 0 0 50px rgba(0,0,0,0.3); }
        
        .copy-btn { background: var(--dark); color: white; border: none; padding: 14px; border-radius: 6px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 10px; transition: 0.2s; }
        .copy-btn:hover { background: #000; box-shadow: 0 4px 12px rgba(0,255,127,0.3); }
        
        .action-btn { background: #0369a1; color: white; border: none; padding: 8px; border-radius: 4px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 5px; }
        
        .team-mention { margin-top: 15px; padding: 10px; background: #fff5f5; border-radius: 8px; border: 1px dashed var(--primary); font-size: 11px; text-align: center; }
        .heart { color: var(--primary); animation: beat .3s infinite alternate; display: inline-block; }
        @keyframes beat { to { transform: scale(1.1); } }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="sidebar-content">
        <h2>OlyBoost Editor üöÄ</h2>

        <div class="smart-box">
            <label>‚ö° SMART PASTE (RU/EN/EE/LV)</label>
            <textarea id="smart-input" style="height: 60px; margin-top: 5px;" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç —Ü–µ–ª–∏–∫–æ–º (—Å –∫–∞–≤—ã—á–∫–∞–º–∏ –∏ —Ü–∏—Ñ—Ä–∞–º–∏)..."></textarea>
            <button class="action-btn" onclick="processSmartPaste()">–†–ê–ó–û–ë–†–ê–¢–¨ –ò –û–ü–†–ï–î–ï–õ–ò–¢–¨ –Ø–ó–´–ö</button>
        </div>

        <div class="group">
            <label>–Ø–∑—ã–∫ —à–∞–±–ª–æ–Ω–∞</label>
            <select id="lang" onchange="updateFieldsFromLang(); generate();">
                <option value="EN">English (EN)</option>
                <option value="ET">Estonian (EE)</option>
                <option value="RU" selected>Russian (RU)</option>
                <option value="LV">Latvian (LV)</option>
            </select>
        </div>

        <div class="group"><label>–ö–∞—Ä—Ç–∏–Ω–∫–∞ (URL)</label><input id="img" type="text" placeholder="https://..." oninput="generate()"></div>
        <div class="group"><label>–ò–Ω—Ç—Ä–æ (Ctrl+B = Bold)</label><textarea id="intro" oninput="updateCurrentLangData(); generate()"></textarea></div>
        <div class="group"><label>–õ–∏–Ω–∏—è (–ú–∞—Ç—á)</label><input id="line" type="text" oninput="updateCurrentLangData(); generate()"></div>
        <div class="group"><label>–°—Ç–∞—Ä—ã–π –∫–æ—ç—Ñ.</label><input id="old" type="text" oninput="generate()"></div>
        <div class="group"><label>–ù–æ–≤—ã–π –∫–æ—ç—Ñ.</label><input id="new" type="text" oninput="generate()"></div>
        <div class="group"><label>–°—Å—ã–ª–∫–∞</label><input id="link" type="text" oninput="generate()"></div>

        <button class="copy-btn" onclick="copyCode()">–°–ö–û–ü–ò–†–û–í–ê–¢–¨ HTML –ö–û–î</button>

        <div class="import-box">
            <label>üìÅ –ò–º–ø–æ—Ä—Ç –∏–∑ –≥–æ—Ç–æ–≤–æ–≥–æ HTML</label>
            <textarea id="import-html" style="height: 50px; margin-top: 5px;" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ HTML –∫–æ–¥ –±–∞–Ω–Ω–µ—Ä–∞..."></textarea>
            <button class="action-btn" style="background: #4b5563;" onclick="importHTML()">–í–û–°–°–¢–ê–ù–û–í–ò–¢–¨ –î–ê–ù–ù–´–ï</button>
        </div>

        <div class="team-mention">
            Made with <span class="heart">‚ù§Ô∏è</span> for <b>OlyBet Executive Team</b><br>
            <small>(–í–µ—Ä–æ–Ω–∏–∫–∞, –ú–∞—à–∞, –õ–µ—Ä–∞, –ê–Ω–≥–µ–ª–∏–Ω–∞, –ö–∏—Ç–∏—è)</small>
        </div>
    </div>
</div>

<div class="workspace">
    <div id="preview" class="preview-box"></div>
    <div style="width:100%; max-width:800px; background:white; padding:15px; border-radius:10px;">
        <label>–†–µ–∑—É–ª—å—Ç–∞—Ç (–ö–æ–¥ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏):</label>
        <textarea id="output" readonly style="height: 60px; font-family: monospace; font-size: 11px;"></textarea>
    </div>
</div>

<script>
    const baseTemplate = `<div style="text-align:left;display:inline-block;font-family:Montserrat,sans-serif;background-color:#252525;border-radius:10px;max-width:400px;box-shadow:0 4px 15px rgba(0,0,0,.5);position:relative;font-size:14px;padding:0;overflow:hidden" class=popup><div style=background-color:#252525;text-align:center><img src="[IMG LINK]" style=width:100%;height:auto;display:block><div style="padding:15px 10px"><h2 style="margin:0;color:#fff;font-size:22px;line-height:1.1;font-weight:900;text-transform:uppercase;text-shadow:1px 1px 2px rgba(0,0,0,.2)"> FLASH SUPERBOOST</h2></div></div><div style="padding:25px 20px;color:#fff;text-align:center"><p style="margin:0 0 20px 0;font-size:14px;line-height:1.5;color:#ccc">[INTRO TEXT]<br>[LINE]<div style="background-color:#252525;border:1px solid #333;border-radius:8px;padding:15px;margin-bottom:20px;display:flex;align-items:center;justify-content:center;gap:15px"><div style=text-align:center><div style=font-size:11px;color:#888;font-weight:700;margin-bottom:2px>[WAS_LABEL]</div><div style=font-size:20px;color:#888;text-decoration:line-through;font-weight:600>[OLD ODDS]</div></div><div style=font-size:24px;color:#f73535>‚ûî</div><div style=text-align:center><div style=font-size:11px;color:#f73535;font-weight:700;margin-bottom:2px>[NOW_LABEL]</div><div style=font-size:36px;color:#f73535;font-weight:900;line-height:1>[NEW ODDS]</div></div></div><p style="margin:0 0 20px 0;font-size:13px;line-height:1.4;color:#999">[FOOTER_TEXT]<p style="margin:0 0 20px 0;font-size:14px;line-height:1.5;color:#ccc"><a href="[LINK]" target=_blank style=text-decoration:none;display:block><span style="display:block;width:100%;background-color:#00ff7f;color:#000;padding:14px 0;font-weight:800;font-size:18px;border-radius:4px;text-transform:uppercase;box-shadow:0 4px 0 #0c6">[CTA_TEXT]</span></a></div></div><style>#modal-title{display:none!important}#modal-background{background:0 0!important;text-align:center}</style>`;

    const langConfigs = {
        EN: { was: "WAS", now: "NOW", footer: "Max bet ‚Ç¨10. Find it in the OlyBoost section!", cta: "GO FOR IT" },
        ET: { was: "ENNE", now: "N√ú√úD", footer: "Maksimaalne panus 10 ‚Ç¨. Leia see OlyBoosti sektsioonist!", cta: "HAKKA PIHTA" },
        RU: { was: "–ë–´–õ", now: "–°–ï–ô–ß–ê–°", footer: "–ú–∞–∫—Å. —Å—Ç–∞–≤–∫–∞ 10 ‚Ç¨. –ù–∞–π–¥–∏—Ç–µ –µ–≥–æ –≤ —Ä–∞–∑–¥–µ–ª–µ OlyBoost!", cta: "–í–ü–ï–†–Å–î" },
        LV: { was: "BIJA", now: "TAGAD", footer: "Maks. likme ‚Äì 10 ‚Ç¨. Atrodi piedƒÅvƒÅjumu OlyBoost sadaƒºƒÅ!", cta: "UZ PRIEK≈†U" }
    };

    let langData = { EN: { i: "", l: "" }, ET: { i: "", l: "" }, RU: { i: "", l: "" }, LV: { i: "", l: "" } };
    let historyStack = [];
    let isSilent = false;

    function processSmartPaste() {
        const input = document.getElementById('smart-input').value;
        if (!input) return;

        // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
        const oddsRegex = /(\d+[.,]\d+).*?(\d+[.,]\d+)/;
        const oddsMatch = input.match(oddsRegex);
        if (oddsMatch) {
            document.getElementById('old').value = oddsMatch[1].replace(',', '.');
            document.getElementById('new').value = oddsMatch[2].replace(',', '.');
        }

        // –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç—á–∞ (–∫–∞–≤—ã—á–∫–∏ " " –∏–ª–∏ ¬´ ¬ª)
        const lineRegex = /["¬´]([^"¬ª]+)["¬ª]/;
        const lineMatch = input.match(lineRegex);
        if (lineMatch) document.getElementById('line').value = lineMatch[1];

        // –ò–Ω—Ç—Ä–æ
        if (lineMatch) {
            let intro = input.split(lineMatch[0])[0].replace(/FLASH SUPERBOOST/gi, '').trim();
            document.getElementById('intro').value = intro;
        }

        // –ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
        if (input.includes("–ë–´–õ") || input.includes("–ù–∞—Å–ª–∞–¥–∏—Ç–µ—Å—å") || input.includes("–°–ï–ô–ß–ê–°")) document.getElementById('lang').value = "RU";
        else if (input.includes("ENNE") || input.includes("Naudi")) document.getElementById('lang').value = "ET";
        else if (input.includes("BIJA")) document.getElementById('lang').value = "LV";
        else document.getElementById('lang').value = "EN";

        updateCurrentLangData();
        generate();
    }

    function importHTML() {
        const raw = document.getElementById('import-html').value;
        if (!raw) return;
        const parser = new DOMParser();
        const doc = parser.parseFromString(raw, 'text/html');
        try {
            isSilent = true;
            document.getElementById('img').value = doc.querySelector('img')?.getAttribute('src') || "";
            document.getElementById('old').value = doc.querySelector('div[style*="text-decoration:line-through"]')?.innerText || "";
            document.getElementById('new').value = doc.querySelector('div[style*="font-size:36px"]')?.innerText || "";
            document.getElementById('link').value = doc.querySelector('a')?.getAttribute('href') || "";
            let [intro, line] = (doc.querySelector('p[style*="font-size:14px"]')?.innerHTML || "").split('<br>');
            document.getElementById('intro').value = (intro || "").trim();
            document.getElementById('line').value = (line || "").trim();
            updateCurrentLangData();
            isSilent = false;
            saveState();
            generate();
        } catch (e) { isSilent = false; alert("–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞"); }
    }

    function updateFieldsFromLang() {
        const lang = document.getElementById('lang').value;
        document.getElementById('intro').value = langData[lang].i;
        document.getElementById('line').value = langData[lang].l;
    }

    function updateCurrentLangData() {
        const lang = document.getElementById('lang').value;
        langData[lang].i = document.getElementById('intro').value;
        langData[lang].l = document.getElementById('line').value;
    }

    function generate(noHistory = false) {
        const lang = document.getElementById('lang').value;
        const conf = langConfigs[lang];
        let res = baseTemplate
            .replaceAll("[IMG LINK]", document.getElementById('img').value || "https://via.placeholder.com/400x200/e32d37/FFFFFF?text=OlyBoost")
            .replaceAll("[INTRO TEXT]", document.getElementById('intro').value.replace(/\n/g, '<br>'))
            .replaceAll("[LINE]", document.getElementById('line').value)
            .replaceAll("[OLD ODDS]", document.getElementById('old').value || "0.00")
            .replaceAll("[NEW ODDS]", document.getElementById('new').value || "0.00")
            .replaceAll("[LINK]", document.getElementById('link').value || "#")
            .replaceAll("[WAS_LABEL]", conf.was)
            .replaceAll("[NOW_LABEL]", conf.now)
            .replaceAll("[FOOTER_TEXT]", conf.footer)
            .replaceAll("[CTA_TEXT]", conf.cta);

        document.getElementById('output').value = res;
        document.getElementById('preview').innerHTML = res;
        if(!noHistory && !isSilent) saveState();
    }

    function saveState() {
        const state = JSON.stringify({ d: langData, img: document.getElementById('img').value, old: document.getElementById('old').value, new: document.getElementById('new').value, link: document.getElementById('link').value, l: document.getElementById('lang').value });
        if (historyStack[historyStack.length - 1] !== state) historyStack.push(state);
    }

    window.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.code === 'KeyZ') {
            e.preventDefault();
            if (historyStack.length > 1) {
                historyStack.pop();
                const last = JSON.parse(historyStack[historyStack.length - 1]);
                langData = last.d;
                document.getElementById('img').value = last.img;
                document.getElementById('old').value = last.old;
                document.getElementById('new').value = last.new;
                document.getElementById('link').value = last.link;
                document.getElementById('lang').value = last.l;
                updateFieldsFromLang();
                generate(true);
            }
        }
        if ((e.ctrlKey || e.metaKey) && e.code === 'KeyB' && document.activeElement.id === 'intro') {
            e.preventDefault();
            const el = document.getElementById('intro');
            const s = el.selectionStart, end = el.selectionEnd;
            el.value = el.value.substring(0, s) + '<strong>' + el.value.substring(s, end) + '</strong>' + el.value.substring(end);
            updateCurrentLangData();
            generate();
        }
    });

    function copyCode() {
        const out = document.getElementById('output');
        out.select();
        document.execCommand('copy');
        alert("–£—Å–ø–µ—à–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!");
    }

    window.onload = () => { updateFieldsFromLang(); generate(); };
</script>
</body>
</html>
